import{r as c,M as O,j as e,u as Q,P as L,a as z,b as V,L as H,m as k,F as K,c as U,d as W,e as q,f as G,g as Z,h as _,i as X,k as J,l as Y}from"./index-C_wfYdSa.js";class ee extends c.Component{getSnapshotBeforeUpdate(m){const d=this.props.childRef.current;if(d&&m.isPresent&&!this.props.isPresent){const o=d.offsetParent,t=o instanceof HTMLElement&&o.offsetWidth||0,i=this.props.sizeRef.current;i.height=d.offsetHeight||0,i.width=d.offsetWidth||0,i.top=d.offsetTop,i.left=d.offsetLeft,i.right=t-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function te({children:r,isPresent:m,anchorX:d}){const o=c.useId(),t=c.useRef(null),i=c.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=c.useContext(O);return c.useInsertionEffect(()=>{const{width:p,height:h,top:f,left:u,right:s}=i.current;if(m||!t.current||!p||!h)return;const n=d==="left"?`left: ${u}`:`right: ${s}`;t.current.dataset.motionPopId=o;const a=document.createElement("style");return l&&(a.nonce=l),document.head.appendChild(a),a.sheet&&a.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${h}px !important;
            ${n}px !important;
            top: ${f}px !important;
          }
        `),()=>{document.head.removeChild(a)}},[m]),e.jsx(ee,{isPresent:m,childRef:t,sizeRef:i,children:c.cloneElement(r,{ref:t})})}const se=({children:r,initial:m,isPresent:d,onExitComplete:o,custom:t,presenceAffectsLayout:i,mode:l,anchorX:p})=>{const h=Q(ne),f=c.useId(),u=c.useCallback(n=>{h.set(n,!0);for(const a of h.values())if(!a)return;o&&o()},[h,o]),s=c.useMemo(()=>({id:f,initial:m,isPresent:d,custom:t,onExitComplete:u,register:n=>(h.set(n,!1),()=>h.delete(n))}),i?[Math.random(),u]:[d,u]);return c.useMemo(()=>{h.forEach((n,a)=>h.set(a,!1))},[d]),c.useEffect(()=>{!d&&!h.size&&o&&o()},[d]),l==="popLayout"&&(r=e.jsx(te,{isPresent:d,anchorX:p,children:r})),e.jsx(L.Provider,{value:s,children:r})};function ne(){return new Map}const F=r=>r.key||"";function D(r){const m=[];return c.Children.forEach(r,d=>{c.isValidElement(d)&&m.push(d)}),m}const ie=({children:r,custom:m,initial:d=!0,onExitComplete:o,presenceAffectsLayout:t=!0,mode:i="sync",propagate:l=!1,anchorX:p="left"})=>{const[h,f]=z(l),u=c.useMemo(()=>D(r),[r]),s=l&&!h?[]:u.map(F),n=c.useRef(!0),a=c.useRef(u),C=Q(()=>new Map),[w,v]=c.useState(u),[x,T]=c.useState(u);V(()=>{n.current=!1,a.current=u;for(let j=0;j<x.length;j++){const g=F(x[j]);s.includes(g)?C.delete(g):C.get(g)!==!0&&C.set(g,!1)}},[x,s.length,s.join("-")]);const b=[];if(u!==w){let j=[...u];for(let g=0;g<x.length;g++){const N=x[g],S=F(N);s.includes(S)||(j.splice(g,0,N),b.push(N))}return i==="wait"&&b.length&&(j=b),T(D(j)),v(u),null}const{forceRender:y}=c.useContext(H);return e.jsx(e.Fragment,{children:x.map(j=>{const g=F(j),N=l&&!h?!1:u===x||s.includes(g),S=()=>{if(C.has(g))C.set(g,!0);else return;let I=!0;C.forEach(B=>{B||(I=!1)}),I&&(y==null||y(),T(a.current),l&&(f==null||f()),o&&o())};return e.jsx(se,{isPresent:N,initial:!n.current||d?void 0:!1,custom:m,presenceAffectsLayout:t,mode:i,onExitComplete:N?void 0:S,anchorX:p,children:j},g)})})},M=[{name:"Extra Chocolate",price:.5},{name:"Sprinkles",price:.25},{name:"Whipped Cream",price:.8}],A=({onToppingsChange:r})=>{const[m,d]=c.useState({}),o=t=>{d(i=>{const l={...i};if(l[t.name])l[t.name]=!1;else{const f=Object.keys(l).filter(u=>l[u]);f.length>=2&&(l[f[0]]=!1),l[t.name]=!0}const p=Object.entries(l).filter(([f,u])=>u).map(([f])=>M.find(u=>u.name===f)).filter(f=>f!==void 0),h=p.reduce((f,u)=>f+u.price,0);return r(p,h),l})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block font-ArialBold  text-grape-800 my-4",children:"Toppings"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:M.map(t=>e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex flex-row  items-center",children:[e.jsx(k.div,{className:`w-8 h-8 flex items-center justify-center rounded-full border-2 cursor-pointer transition-all ${m[t.name]?"bg-grape-950 border-grape-950":"border-gray-400"}`,whileTap:{scale:.6},onClick:()=>o(t),children:e.jsx(k.div,{className:`text-xl transition-all ${m[t.name]?"text-white":"text-gray-400"}`,children:"✓"})}),e.jsx("span",{className:"text-grape-900 mx-4",children:t.name})]}),e.jsxs("span",{className:"text-grape-900",children:["(+$",t.price.toFixed(2),")"]})]},t.name))})]})})},ae="/assets/Allergens_NightMode-BQvZSkva.png",re="/assets/cookie-dough-Nhsf5H5U.png",ce="/assets/dreamweaver-GDgjaVQz.png",oe="/assets/minterstellar-CHCUcVqC.png",le="/assets/vanilla--Is7U6IT.png",E=[{id:1,name:"Mint Chip",description:"Refreshing mint ice cream with delicious chocolate chips.",image:ae},{id:2,name:"Vanilla Bean",description:"Classic vanilla ice cream made with real vanilla beans.",image:le},{id:3,name:"Strawberry Swirl",description:"Creamy strawberry ice cream with a fruity swirl of strawberry sauce.",image:ce},{id:4,name:"Chocolate Fudge",description:"Rich chocolate ice cream loaded with gooey fudge ribbons.",image:re},{id:5,name:"Coffee Crunch",description:"Smooth coffee ice cream with crunchy bits of chocolate-covered espresso beans.",image:oe}],$=({scoop:r})=>{const[m,d]=c.useState(null),o=t=>{d(t);const i=E.find(l=>l.id===t);console.log(`Scoop #${r} selected: ${i==null?void 0:i.name}`)};return e.jsxs("div",{className:"md:p-4",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 text-grape-950",children:["Select (1) Flavor for Scoop #",r]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:E.map(t=>e.jsxs("div",{className:"flex flex-row items-center  text-grape-950 md:flex-col md:items-center",children:[e.jsx("div",{className:"w-36 h-32 md:w-56 md:h-56 overflow-hidden",children:e.jsx("img",{src:t.image,alt:t.name,className:"object-cover w-full h-full"})}),e.jsxs("div",{className:"ml-2 flex flex-col items-center mt-4 md:ml-0 md:mt-4 md:items-center",children:[e.jsxs("div",{className:"w-36 md:w-56 md:h-24",children:[e.jsx("h3",{className:"text-lg md:text-center font-semibold",children:t.name}),e.jsx("p",{className:"text-xs text-wrap md:text-center text-gray-600",children:t.description})]}),e.jsx("div",{className:" justify-center items-center",children:e.jsx(k.div,{className:`w-12 h-12 flex items-center justify-center rounded-full border-2 cursor-pointer transition-all ${m===t.id?"bg-grape-900 border-grape-900":"border-gray-400"}`,whileTap:{scale:.6},onClick:()=>o(t.id),children:e.jsx(k.div,{className:`text-2xl transition-all ${m===t.id?"text-white":"text-gray-400"}`,children:"✓"})})})]})]},t.id))})]})},de=({onToppingsChange:r})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-semibold text-grape-900",children:"Variante"}),e.jsxs("select",{className:"border p-2 w-full text-grape-900",children:[e.jsx("option",{value:"",children:"Seleccione variante"}),e.jsx("option",{value:"on-cookie",children:"Sobre Cookie"}),e.jsx("option",{value:"on-brownie",children:"Sobre Brownie"}),e.jsx("option",{value:"cup",children:"En Copa/Tina"})]})]}),e.jsx($,{scoop:1}),e.jsx($,{scoop:2}),e.jsx(A,{onToppingsChange:r})]}),ue="/assets/Chocolate%20Chunk-D8PSHgI4.png",me="/assets/Double%20Chocolate%20Chunk-C9n85GSZ.png",xe="/assets/peanuts-DFz8DIlZ.png",R="/assets/Double%20Chocolate%20Mint-W5B73IrT.png",he="/assets/Oatmeal%20Raisin-GLp9dKnB.png",P=[{id:1,name:"Chocolate Chunk",description:"Everything you ever dreamed a cookie would be: ooey, gooey and chocolate-y.",image:ue},{id:2,name:"Oatmeal Raisin",description:"A classic cookie flavor with a hearty texture and a touch of cinnamon.",image:he},{id:3,name:"Peanut Butter",description:"Rich, creamy and full of peanut butter flavor for a delicious treat.",image:xe},{id:4,name:"Sugar Cookie",description:"Simple, sweet and perfect for decorating with your favorite toppings.",image:R},{id:5,name:"Snickerdoodle",description:"Soft, chewy cookies with a cinnamon-sugar coating.",image:R},{id:6,name:"Double Chocolate",description:"For the chocolate lovers! A double dose of chocolate in every bite.",image:me}],fe=()=>{const[o,t]=c.useState(()=>{const s={};return P.forEach(n=>{s[n.id]=0}),s}),[i,l]=c.useState(()=>{const s={};return P.forEach(n=>{s[n.id]=0}),s}),p=s=>{t(n=>{const a=n[s]||0,C=Object.values(n).reduce((w,v)=>w+v,0);return a<2&&C<2?{...n,[s]:a+1}:n})},h=s=>{t(n=>{const a=n[s]||0;return a>0?{...n,[s]:a-1}:n})},f=s=>{l(n=>{const a=n[s]||0,C=Object.values(n).reduce((w,v)=>w+v,0);return a<2&&C<2?{...n,[s]:a+1}:n})},u=s=>{l(n=>{const a=n[s]||0;return a>0?{...n,[s]:a-1}:n})};return e.jsxs("div",{children:[e.jsxs("div",{className:"p-4 mb-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-grape-950",children:"Select (2) Cookie Flavors"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(s=>e.jsxs("div",{className:"flex flex-col text-grape-950 items-center p-4",children:[e.jsx("div",{className:"w-56 h-56 overflow-hidden",children:e.jsx("img",{src:s.image,alt:s.name,className:"object-cover w-full h-full"})}),e.jsxs("div",{className:"mt-4 text-center w-56 h-24",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.name}),e.jsx("p",{className:"text-xs text-gray-600",children:s.description})]}),e.jsxs("div",{className:"mt-4 flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>h(s.id),disabled:o[s.id]===0,className:`w-12 h-12 flex items-center justify-center rounded-full text-white font-bold text-2xl transition ${o[s.id]===0?"bg-gray-400 cursor-not-allowed":"bg-grape-900 hover:bg-grape-800"}`,children:"–"}),e.jsx("span",{className:"w-10 text-center font-semibold text-xl",children:o[s.id]}),e.jsx("button",{onClick:()=>p(s.id),disabled:o[s.id]===2||Object.values(o).reduce((n,a)=>n+a,0)>=2,className:`w-12 h-12 flex items-center justify-center rounded-full text-white font-bold text-2xl transition ${o[s.id]===2||Object.values(o).reduce((n,a)=>n+a,0)>=2?"bg-gray-400 cursor-not-allowed":"bg-grape-900 hover:bg-grape-800"}`,children:"+"})]})]},s.id))})]}),e.jsxs("div",{className:"p-4 mb-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-grape-950",children:"Select (2) IceCream Flavors"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map(s=>e.jsxs("div",{className:"flex flex-col text-grape-950 items-center p-4",children:[e.jsx("div",{className:"w-56 h-56 overflow-hidden",children:e.jsx("img",{src:s.image,alt:s.name,className:"object-cover w-full h-full"})}),e.jsxs("div",{className:"mt-4 text-center w-56 h-24",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.name}),e.jsx("p",{className:"text-xs text-gray-600",children:s.description})]}),e.jsxs("div",{className:"mt-4 flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>u(s.id),disabled:i[s.id]===0,className:`w-12 h-12 flex items-center justify-center rounded-full text-white font-bold text-2xl transition ${i[s.id]===0?"bg-gray-400 cursor-not-allowed":"bg-grape-900 hover:bg-grape-800"}`,children:"–"}),e.jsx("span",{className:"w-10 text-center font-semibold text-xl",children:i[s.id]}),e.jsx("button",{onClick:()=>f(s.id),disabled:i[s.id]===2||Object.values(i).reduce((n,a)=>n+a,0)>=2,className:`w-12 h-12 flex items-center justify-center rounded-full text-white font-bold text-2xl transition ${i[s.id]===2||Object.values(i).reduce((n,a)=>n+a,0)>=2?"bg-gray-400 cursor-not-allowed":"bg-grape-900 hover:bg-grape-800"}`,children:"+"})]})]},s.id))})]})]})},pe=({onToppingsChange:r})=>e.jsx(e.Fragment,{children:e.jsx(A,{onToppingsChange:r})}),ge=({price:r,onQuantityChange:m})=>{const[t,i]=c.useState(1),[l,p]=c.useState("1"),[h,f]=c.useState(!1),[u,s]=c.useState(!1);c.useEffect(()=>{s(!0);const x=setTimeout(()=>s(!1),300);return()=>clearTimeout(x)},[t]),c.useEffect(()=>{m(t)},[t,m,l]);const n=()=>{if(t<50){const x=t+1;i(x),p(x.toString())}},a=()=>{if(t>1){const x=t-1;i(x),p(x.toString())}},C=x=>{p(x.target.value)},w=()=>{let x=parseInt(l,10);isNaN(x)&&(x=1),x>50&&(x=50),x<1&&(x=1),i(x),p(x.toString())},v=()=>{i(1),p("1")};return e.jsxs("div",{className:"flex flex-row w-full items-center justify-between my-8",children:[e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-grape-900 text-xl font-ArialBold",children:" How Many ?"}),e.jsx("button",{onClick:v,className:"text-pompadour-900 font-ArialRegular text-lg",children:"Clear Section"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:a,disabled:t===1,className:`w-12 h-12 flex items-center justify-center rounded-full text-white font-bold transition text-lg ${t===1?"bg-gray-400 cursor-not-allowed":"bg-grape-900 hover:bg-grape-800"}`,children:e.jsx(K,{})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:l,onChange:C,onFocus:()=>f(!0),onBlur:()=>{f(!1),w()},className:"w-20 text-center font-ArialBold text-xl border border-grape-950 text-grape-900 rounded-md py-2"}),e.jsx(ie,{children:!h&&u&&e.jsx(k.span,{initial:{scale:.5,opacity:0,y:-20,rotate:-15},animate:{scale:[1.5,1],opacity:[0,1],y:[-20,0],rotate:[15,0]},exit:{scale:.5,opacity:0,y:20,rotate:15},transition:{duration:.5,ease:"easeInOut"},className:"absolute inset-0 flex items-center justify-center pointer-events-none select-none text-grape-900 font-bold",children:t},t)})]}),e.jsx("button",{onClick:n,disabled:t===50,className:`w-12 h-12 flex items-center justify-center rounded-full text-white font-bold transition text-lg ${t===50?"bg-gray-400 cursor-not-allowed":"bg-grape-900 hover:bg-grape-800"}`,children:e.jsx(U,{})})]})]})},je=(r,m)=>{if(!r||!m)return;const d=J.find(o=>o.category.toLowerCase()===r.toLowerCase());if(d)return d.items.find(o=>o.id===m)},Ce=()=>{c.useEffect(()=>{window.scrollTo(0,0)},[]);const{category:r,productKey:m}=W(),d=q(),o=G(b=>b.orders);console.log(r+"--"+m);const t=je(r,m),i=Z(),[l,p]=c.useState(1),[h,f]=c.useState([]),[u,s]=c.useState(t?t.price:0),n=(b,y,j)=>{const g=j.reduce((N,S)=>N+S.price,0);return Number(((b+g)*y).toFixed(2))},a=b=>{p(b),w(b,h)},C=b=>{f(b),w(l,b)},w=(b,y)=>{const g=y.reduce((S,I)=>S+I.price,0)*l,N=Number((t.price*b+g).toFixed(2));s(N)},{register:v,handleSubmit:x}=_(),T=b=>{if(!t)return;const y={id:t.id,name:t.name,price:t.price,quantity:l,options:h.map(j=>({id:j.name,name:j.name,extraPrice:j.price})),specifications:""};d(Y(y)),console.log("Producto agregado:",y),console.log("Orden actual:",o)};return c.useEffect(()=>{t&&s(n(t.price,l,h))},[t,l,h]),e.jsx("div",{className:"flex justify-center mb-20 p-4 ",children:e.jsxs("div",{className:"w-full  flex flex-col lg:flex-row items-center lg:items-start gap-8 mt-10",children:[e.jsx("div",{className:"w-full flex justify-center lg:w-5/12  lg:top-10 py-4",children:e.jsx("img",{src:t.imageLeft,alt:t.name,className:"w-72 h-72 md:w-auto md:h-96 object-cover "})}),e.jsxs("div",{className:"w-full lg:w-7/12 px-4 ",children:[e.jsxs("button",{onClick:()=>i("/menu"),className:"text-grape-900 flex items-center font-bold justify-start mb-4",children:[e.jsx(X,{className:"mr-2",size:24}),"Back to Menú"]}),e.jsx("h1",{className:"text-4xl font-bold text-grape-900 mb-2",children:t.name}),e.jsx("p",{className:"text-grape-900 text-lg",children:t.description}),e.jsxs("p",{className:"text-2xl text-grape-900 font-semibold mt-2",children:["$ ",t.price]}),e.jsxs("form",{onSubmit:x(T),className:"mt-6 space-y-4",children:[(r==="Coockies"||r==="Drinks")&&e.jsx(e.Fragment,{}),r==="Desserts"&&e.jsx(pe,{onToppingsChange:C}),r==="Ice-cream"&&e.jsx(de,{onToppingsChange:C}),r==="Mashoops"&&e.jsx(fe,{}),e.jsxs("div",{children:[e.jsx(ge,{price:t.price,onQuantityChange:a}),e.jsx("div",{className:"w-full bottom-4 left-0  flex justify-center p-4",children:e.jsxs("button",{type:"submit",className:"w-full p-3 bg-grape-950 text-white font-ArialBold text-xl rounded-full transition hover:bg-grape-800 shadow-lg",children:["Add to cart $ ",u]})})]})]})]})]})})};export{Ce as default};
